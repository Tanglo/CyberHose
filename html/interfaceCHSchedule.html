<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CyberHose: CHSchedule Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CyberHose
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">CyberHose is an irrigation controller and weather station</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classCHSchedule-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CHSchedule Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class to load and store the CyberHose schedule.  
 <a href="interfaceCHSchedule.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="CHSchedule_8h_source.html">CHSchedule.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CHSchedule:</div>
<div class="dyncontent">
<div class="center"><img src="interfaceCHSchedule__inherit__graph.png" border="0" usemap="#CHSchedule_inherit__map" alt="Inheritance graph"/></div>
<map name="CHSchedule_inherit__map" id="CHSchedule_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CHSchedule:</div>
<div class="dyncontent">
<div class="center"><img src="interfaceCHSchedule__coll__graph.png" border="0" usemap="#CHSchedule_coll__map" alt="Collaboration graph"/></div>
<map name="CHSchedule_coll__map" id="CHSchedule_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a81343db3a709bf33fc445c3cf656ddfe"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCHSchedule.html#a81343db3a709bf33fc445c3cf656ddfe">initWithPath:</a></td></tr>
<tr class="separator:a81343db3a709bf33fc445c3cf656ddfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68da51685e61f23ce2ceb680895ae0e8"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCHSchedule.html#a68da51685e61f23ce2ceb680895ae0e8">printSchedule</a></td></tr>
<tr class="separator:a68da51685e61f23ce2ceb680895ae0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:ab5d5cd89d923616f44b12e2373699e18"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceCHSchedule.html">CHSchedule</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfaceCHSchedule.html#ab5d5cd89d923616f44b12e2373699e18">scheduleWithPath:</a></td></tr>
<tr class="separator:ab5d5cd89d923616f44b12e2373699e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a57addd2655219bcbfbeedd38128fd"><td class="memItemLeft" align="right" valign="top">(NSArray *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfaceCHSchedule.html#ac1a57addd2655219bcbfbeedd38128fd">scheduleLinesByRemovingCommentsAndBlankLinesFrom:</a></td></tr>
<tr class="separator:ac1a57addd2655219bcbfbeedd38128fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45b333e134c00433a0398e19d8d51808"><td class="memItemLeft" align="right" valign="top">(NSDictionary *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfaceCHSchedule.html#a45b333e134c00433a0398e19d8d51808">dataAndCommentsFrom:</a></td></tr>
<tr class="separator:a45b333e134c00433a0398e19d8d51808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaf5eadd9c6984076d9368d1e61087d6"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfaceCHSchedule.html#afaf5eadd9c6984076d9368d1e61087d6">lineIsAComment:</a></td></tr>
<tr class="separator:afaf5eadd9c6984076d9368d1e61087d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a4d3a6165f9c637b747366ca608fdf5c7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d3a6165f9c637b747366ca608fdf5c7"></a>
NSArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCHSchedule.html#a4d3a6165f9c637b747366ca608fdf5c7">_scheduleLines</a></td></tr>
<tr class="memdesc:a4d3a6165f9c637b747366ca608fdf5c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">An array of the <code><a class="el" href="interfaceCHScheduleLine.html" title="A class to manage a single line of a CyberHose schedule. ">CHScheduleLine</a></code> objects. <br /></td></tr>
<tr class="separator:a4d3a6165f9c637b747366ca608fdf5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class to load and store the CyberHose schedule. </p>
<p>An instance of this class is created when CyberHose starts. The schedule is then loaded from the path specified in the settings file (~/.cyberhose).</p>
<p>The format for the schedule file is:</p>
<p>line | freq | dur | days | time | s0(tank) | s1(mains) | s2(grey) 0(fruit) | 2w | 1h | - | 1900 | 1 | 1 | 1 1(bonsai) | 1d | 10m | - | 1830 | 1 | 1 | 0 2(veges) | - | 30m | 84 | 1900 0700 | 1 | 1 | 1</p>
<p>The 'line' and 'dur' columns must be present. At least one of the 'freq' or 'days' must be present. There must be at least one 'sX' column, but there can be as many as needed. Text contained by brackets and white space are ignored. Thus brackets can be used to make comments. The '|' characters are the separators for the variables. A single '-' represents no entry.</p>
<p>Each of the columns has the following meaning: line: the number of the irrigation line. Each line represents a single entry in the schedule</p>
<p>freq: how often the line is irrigated. 'w' refers to weeks, 'd' to days, and 'h' to hours. 2w, means water every second week, 3d, means water every 3rd day, etc.</p>
<p>dur: the duration of the irrigation. 'h' means hours, and 'm' means minutes. So entering 10m will run the irrigation on that line for 10 minutes.</p>
<p>days: rather than specifying a frequency, one can specify which days of the week to irrigate. Here a binary sum flag is used where Sun=1, Mon=2, Tue=4, Wed=8, Thu=16, Fri=32, Sat=64. For example to water on Tue, Thu and Sat, set days = 4+16+64 = 84 in the last two lines of the example above. Specifying the days variable for a line will causes the freq variable to be ignored.</p>
<p>time: sets the irrigation times when 'days' is used for scheduling. So the above example will irrigate line 2(veges) at 0700 and 1900 on Tue, Thu, and Sat. When frequency is used instead the first value of 'time' will set the initial irrigation time when CyberHose starts up.</p>
<p>sX: Each of these represents a water source that is specified in the CyberHose settings. There can be as many of these as needed, but they will be ignored if the matching settings are not found. Lower numbered sources take priority. So CyberHose will attempt to water with s0 first, and will only use s1 is s0 is unavailable, it will try s1 before s2, and so on. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a45b333e134c00433a0398e19d8d51808"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (NSDictionary *) dataAndCommentsFrom: </td>
          <td></td>
          <td class="paramtype">(NSArray*)&#160;</td>
          <td class="paramname"><em>strings</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removeds the variable comments (i.e. text contained in brackets) from an array of strings </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strings</td><td>An <code>NSArray</code> of strings </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The same array of strings with text contained in brackets removed from each string.</dd></dl>
<p>Removes the comments (i.e. tect contained in brackets) from an array of strings and returns the strings and the comments. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strings</td><td>An <code>NSArray</code> of strings </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <code>NSDictionary</code> containing and two arrays keyed by "dataStrings" and "comments" </dd></dl>

</div>
</div>
<a class="anchor" id="a81343db3a709bf33fc445c3cf656ddfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithPath: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>path</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialises a <code><a class="el" href="interfaceCHSchedule.html" title="A class to load and store the CyberHose schedule. ">CHSchedule</a></code> object using the path provided. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>An <code>NSString</code> that conatins the path to the CyberHose schedule file that will be loaded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If sucessful, an initialised instance of <code><a class="el" href="interfaceCHSchedule.html" title="A class to load and store the CyberHose schedule. ">CHSchedule</a></code>, otherwise <code>nil</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="afaf5eadd9c6984076d9368d1e61087d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (BOOL) lineIsAComment: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>line</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tests if a schedule line is a comment (i.e. starts with //). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>The schedule line string to test. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>YES</code> if the line starts with //, else NO. </dd></dl>

</div>
</div>
<a class="anchor" id="a68da51685e61f23ce2ceb680895ae0e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) printSchedule </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a debugging function that prints the schedule using NSLog </p>

</div>
</div>
<a class="anchor" id="ac1a57addd2655219bcbfbeedd38128fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (NSArray *) scheduleLinesByRemovingCommentsAndBlankLinesFrom: </td>
          <td></td>
          <td class="paramtype">(NSArray *)&#160;</td>
          <td class="paramname"><em>lines</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes the commented lines (i.e. starting wtih "//") and blanks lines (i.e. "") from an array of schedule lines </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lines</td><td>An array of cyberhose schedule line strings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>and NSArray of cyberhose schedule strings with the blank and commented lines removed. </dd></dl>

</div>
</div>
<a class="anchor" id="ab5d5cd89d923616f44b12e2373699e18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interfaceCHSchedule.html">CHSchedule</a> *) scheduleWithPath: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>path</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initialises an autoreleasing <code><a class="el" href="interfaceCHSchedule.html" title="A class to load and store the CyberHose schedule. ">CHSchedule</a></code> object using the path provided. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>An <code>NSString</code> that conatins the path to the CyberHose schedule file that will be loaded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If sucessful, an initialised instance of <code><a class="el" href="interfaceCHSchedule.html" title="A class to load and store the CyberHose schedule. ">CHSchedule</a></code>, otherwise <code>nil</code>. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="CHSchedule_8h_source.html">CHSchedule.h</a></li>
<li>CHSchedule.m</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 3 2016 08:30:41 for CyberHose by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
